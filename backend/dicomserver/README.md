# Инструкция по развертыванию системы

## Описание

Система предоставляет:

- WEB интерфейс
    - загрузки DICOM файлов
    - разметки изображений из загруженных файлов

- REST API
    - загрузки DICOM файлов
    - разметки изображений из загруженных файлов
    - поиска выполненных ранее разметок по набору тегов и модальностям

### Вариант использования разметки

1. пользователь загружает dicom файл используя WEB-интерфейс
2. пользователь выполняет разметку одного или нескольких изображений из загруженного dicom-файла

### Вариант поиска разметок для обучения

1. пользователь используя инструменты отправки HTTP-запросов выполняет запрос на путь `/search/markup` с указанием
   необходимых тегов и модальностей
2. пользователь получает список идентификаторов dicomId и imageId для которых был выполнена разметка
3. пользователь используя API сервера получает изображения и соответствующие разметки используя идентификаторы
   полученные
   на предыдущем шаге
4. полученные данные пользователь использует для обучения ML-систем

## Системные требования

### Аппаратные требования

CPU: не менее 1 ядра
RAM: не менее 500МБ
HDD: зависит от объема хранимых данных

### Программные требования

ОС: Unix / Windows
JRE: 11 и выше
БД: может использоваться любая реляционная БД

## Развертывание

1. Для развертывания сервера достаточно распаковать архив `dicomserver.tgz` в каталог, например в `/srv/dicomserver`.
2. Выполнить скрипт `sh server-start.sh`.

Сервер будет доступен по адресу [http://localhost:8080](http://localhost:8080). Все загруженные dicom файлы, а так же
извлеченные изображения будут сохраняться в каталог `storage`. Сохраненная разметка будет сохранена в БД. Порт,
расположение хранилища файлов и параметр БД настраиваются в конфигурационном файле `application.properties`. Логирование
можно насроить используя конфигурационный файл `application.properties`. По умолчанию логирование использует системный
вывод, а все записи созраняются в файл `nohup.out`.

## Остановка сервера

Для остановки работающего сервера выполните скрипт `sh server-stop.sh`.

## Удаление

Для удаления достаточно удалить каталог с серверром и всё его содержимое.